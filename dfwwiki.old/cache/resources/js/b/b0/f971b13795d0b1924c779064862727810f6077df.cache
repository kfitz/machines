mw.loader.implement("mediawiki.action.history",function($){jQuery(document).ready(function($){var $historyCompareForm=$('#mw-history-compare'),$historySubmitter,$lis=$('#pagehistory > li');function updateDiffRadios(){var diffLi=false,oldLi=false;if(!$lis.length){return true;}$lis.removeClass('selected').each(function(){var $li=$(this),$inputs=$li.find('input[type="radio"]'),$oldidRadio=$inputs.filter('[name="oldid"]').eq(0),$diffRadio=$inputs.filter('[name="diff"]').eq(0);if(!$oldidRadio.length||!$diffRadio.length){return true;}if($oldidRadio.prop('checked')){oldLi=true;$li.addClass('selected');$oldidRadio.css('visibility','visible');$diffRadio.css('visibility','hidden');}else if($diffRadio.prop('checked')){diffLi=true;$li.addClass('selected');$oldidRadio.css('visibility','hidden');$diffRadio.css('visibility','visible');}else{if(diffLi&&oldLi){$oldidRadio.css('visibility','visible');$diffRadio.css('visibility','hidden');}else if(diffLi){$diffRadio.css('visibility','visible');
$oldidRadio.css('visibility','visible');}else{$diffRadio.css('visibility','visible');$oldidRadio.css('visibility','hidden');}}});return true;}$lis.find('input[name="diff"], input[name="oldid"]').click(updateDiffRadios);updateDiffRadios();$historyCompareForm.find('.historysubmit').click(function(){$historySubmitter=$(this);});$historyCompareForm.submit(function(e){var $copyForm,$copyRadios,$copyAction;if($historySubmitter){$copyForm=$historyCompareForm.clone();$copyRadios=$copyForm.find('#pagehistory > li').find('input[name="diff"], input[name="oldid"]');$copyAction=$copyForm.find('> [name="action"]');if($historySubmitter.hasClass('mw-history-compareselectedversions-button')){$copyAction.remove();$copyForm.find('input[name^="ids["]:checked').prop('checked',false);}else if($historySubmitter.hasClass('mw-history-revisiondelete-button')){$copyRadios.remove();$copyAction.val($historySubmitter.attr('name'));$copyForm.find(':submit').remove();}$copyForm.css('display','none').find('[id]').
removeAttr('id').end().insertAfter($historyCompareForm).submit();e.preventDefault();return false;}return true;});});;},{},{});

/* cache key: machines_dfwwiki:resourceloader:filter:minify-js:7:a7008c2a889b67a631bf5d92c95687af */
